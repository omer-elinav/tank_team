const frames = [
  "assets/images/animatedradar/base/cropped000.png",
  "assets/images/animatedradar/base/cropped001.png",
  "assets/images/animatedradar/base/cropped002.png",
  "assets/images/animatedradar/base/cropped003.png",
  "assets/images/animatedradar/base/cropped004.png",
  "assets/images/animatedradar/base/cropped005.png",
  "assets/images/animatedradar/base/cropped006.png",
  "assets/images/animatedradar/base/cropped007.png",
  "assets/images/animatedradar/base/cropped008.png",
  "assets/images/animatedradar/base/cropped009.png",
  "assets/images/animatedradar/base/cropped010.png",
  "assets/images/animatedradar/base/cropped011.png",
  "assets/images/animatedradar/base/cropped012.png",
  "assets/images/animatedradar/base/cropped013.png",
  "assets/images/animatedradar/base/cropped014.png",
  "assets/images/animatedradar/base/cropped015.png",
  "assets/images/animatedradar/base/cropped016.png",
  "assets/images/animatedradar/base/cropped017.png",
  "assets/images/animatedradar/base/cropped018.png",
  "assets/images/animatedradar/base/cropped019.png",
  "assets/images/animatedradar/base/cropped020.png",
  "assets/images/animatedradar/base/cropped021.png",
  "assets/images/animatedradar/base/cropped022.png",
  "assets/images/animatedradar/base/cropped023.png",
  "assets/images/animatedradar/base/cropped024.png",
  "assets/images/animatedradar/base/cropped025.png",
  "assets/images/animatedradar/base/cropped026.png",
  "assets/images/animatedradar/base/cropped027.png",
  "assets/images/animatedradar/base/cropped028.png",
  "assets/images/animatedradar/base/cropped029.png",
  "assets/images/animatedradar/base/cropped030.png",
  "assets/images/animatedradar/base/cropped031.png",
  "assets/images/animatedradar/base/cropped032.png",
  "assets/images/animatedradar/base/cropped033.png",
  "assets/images/animatedradar/base/cropped034.png",
  "assets/images/animatedradar/base/cropped035.png",
  "assets/images/animatedradar/base/cropped036.png",
  "assets/images/animatedradar/base/cropped037.png",
  "assets/images/animatedradar/base/cropped038.png",
  "assets/images/animatedradar/base/cropped039.png",
  "assets/images/animatedradar/base/cropped040.png",
  "assets/images/animatedradar/base/cropped041.png",
  "assets/images/animatedradar/base/cropped042.png",
  "assets/images/animatedradar/base/cropped043.png",
  "assets/images/animatedradar/base/cropped044.png",
  "assets/images/animatedradar/base/cropped045.png",
  "assets/images/animatedradar/base/cropped046.png",
  "assets/images/animatedradar/base/cropped047.png",
  "assets/images/animatedradar/base/cropped048.png",
  "assets/images/animatedradar/base/cropped049.png",
  "assets/images/animatedradar/base/cropped050.png",
  "assets/images/animatedradar/base/cropped051.png",
  "assets/images/animatedradar/base/cropped052.png",
  "assets/images/animatedradar/base/cropped053.png",
  "assets/images/animatedradar/base/cropped054.png",
  "assets/images/animatedradar/base/cropped055.png",
  "assets/images/animatedradar/base/cropped056.png",
  "assets/images/animatedradar/base/cropped057.png",
  "assets/images/animatedradar/base/cropped058.png",
  "assets/images/animatedradar/base/cropped059.png",
  "assets/images/animatedradar/base/cropped060.png",
  "assets/images/animatedradar/base/cropped061.png",
  "assets/images/animatedradar/base/cropped062.png",
  "assets/images/animatedradar/base/cropped063.png",
  "assets/images/animatedradar/base/cropped064.png",
  "assets/images/animatedradar/base/cropped065.png",
  "assets/images/animatedradar/base/cropped066.png",
  "assets/images/animatedradar/base/cropped067.png",
  "assets/images/animatedradar/base/cropped068.png",
  "assets/images/animatedradar/base/cropped069.png",
  "assets/images/animatedradar/base/cropped070.png",
  "assets/images/animatedradar/base/cropped071.png",
  "assets/images/animatedradar/base/cropped072.png",
  "assets/images/animatedradar/base/cropped073.png",
  "assets/images/animatedradar/base/cropped074.png",
  "assets/images/animatedradar/base/cropped075.png",
  "assets/images/animatedradar/base/cropped076.png",
  "assets/images/animatedradar/base/cropped077.png",
  "assets/images/animatedradar/base/cropped078.png",
  "assets/images/animatedradar/base/cropped079.png",
  "assets/images/animatedradar/base/cropped080.png",
  "assets/images/animatedradar/base/cropped081.png",
  "assets/images/animatedradar/base/cropped082.png",
  "assets/images/animatedradar/base/cropped083.png",
  "assets/images/animatedradar/base/cropped084.png",
  "assets/images/animatedradar/base/cropped085.png",
  "assets/images/animatedradar/base/cropped086.png",
  "assets/images/animatedradar/base/cropped087.png",
  "assets/images/animatedradar/base/cropped088.png",
  "assets/images/animatedradar/base/cropped089.png",
  "assets/images/animatedradar/base/cropped090.png",
  "assets/images/animatedradar/base/cropped091.png",
  "assets/images/animatedradar/base/cropped092.png",
  "assets/images/animatedradar/base/cropped093.png",
  "assets/images/animatedradar/base/cropped094.png",
  "assets/images/animatedradar/base/cropped095.png",
  "assets/images/animatedradar/base/cropped096.png",
  "assets/images/animatedradar/base/cropped097.png",
  "assets/images/animatedradar/base/cropped098.png",
  "assets/images/animatedradar/base/cropped099.png",
  "assets/images/animatedradar/base/cropped100.png",
  "assets/images/animatedradar/base/cropped101.png",
  "assets/images/animatedradar/base/cropped102.png",
  "assets/images/animatedradar/base/cropped103.png",
  "assets/images/animatedradar/base/cropped104.png",
  "assets/images/animatedradar/base/cropped105.png",
  "assets/images/animatedradar/base/cropped106.png",
  "assets/images/animatedradar/base/cropped107.png",
  "assets/images/animatedradar/base/cropped108.png",
  "assets/images/animatedradar/base/cropped109.png",
  "assets/images/animatedradar/base/cropped110.png",
  "assets/images/animatedradar/base/cropped111.png",
  "assets/images/animatedradar/base/cropped112.png",
  "assets/images/animatedradar/base/cropped113.png",
  "assets/images/animatedradar/base/cropped114.png",
  "assets/images/animatedradar/base/cropped115.png",
  "assets/images/animatedradar/base/cropped116.png",
  "assets/images/animatedradar/base/cropped117.png",
  "assets/images/animatedradar/base/cropped118.png",
  "assets/images/animatedradar/base/cropped119.png",
  "assets/images/animatedradar/base/cropped120.png",
  "assets/images/animatedradar/base/cropped121.png",
  "assets/images/animatedradar/base/cropped122.png",
  "assets/images/animatedradar/base/cropped123.png",
  "assets/images/animatedradar/base/cropped124.png",
  "assets/images/animatedradar/base/cropped125.png",
  "assets/images/animatedradar/base/cropped126.png",
  "assets/images/animatedradar/base/cropped127.png",
  "assets/images/animatedradar/base/cropped128.png",
  "assets/images/animatedradar/base/cropped129.png",
  "assets/images/animatedradar/base/cropped130.png",
  "assets/images/animatedradar/base/cropped131.png",
  "assets/images/animatedradar/base/cropped132.png",
  "assets/images/animatedradar/base/cropped133.png",
  "assets/images/animatedradar/base/cropped134.png",
  "assets/images/animatedradar/base/cropped135.png",
  "assets/images/animatedradar/base/cropped136.png",
  "assets/images/animatedradar/base/cropped137.png",
  "assets/images/animatedradar/base/cropped138.png",
  "assets/images/animatedradar/base/cropped139.png",
  "assets/images/animatedradar/base/cropped140.png",
  "assets/images/animatedradar/base/cropped141.png",
  "assets/images/animatedradar/base/cropped142.png",
  "assets/images/animatedradar/base/cropped143.png",
  "assets/images/animatedradar/base/cropped144.png",
  "assets/images/animatedradar/base/cropped145.png",
  "assets/images/animatedradar/base/cropped146.png",
  "assets/images/animatedradar/base/cropped147.png",
  "assets/images/animatedradar/base/cropped148.png",
  "assets/images/animatedradar/base/cropped149.png",
  "assets/images/animatedradar/base/cropped150.png",
  "assets/images/animatedradar/base/cropped151.png",
  "assets/images/animatedradar/base/cropped152.png",
  "assets/images/animatedradar/base/cropped153.png",
  "assets/images/animatedradar/base/cropped154.png",
  "assets/images/animatedradar/base/cropped155.png",
  "assets/images/animatedradar/base/cropped156.png",
  "assets/images/animatedradar/base/cropped157.png",
  "assets/images/animatedradar/base/cropped158.png",
  "assets/images/animatedradar/base/cropped159.png",
  "assets/images/animatedradar/base/cropped160.png",
  "assets/images/animatedradar/base/cropped161.png",
  "assets/images/animatedradar/base/cropped162.png",
  "assets/images/animatedradar/base/cropped163.png",
  "assets/images/animatedradar/base/cropped164.png",
  "assets/images/animatedradar/base/cropped165.png",
  "assets/images/animatedradar/base/cropped166.png",
  "assets/images/animatedradar/base/cropped167.png",
  "assets/images/animatedradar/base/cropped168.png",
  "assets/images/animatedradar/base/cropped169.png",
  "assets/images/animatedradar/base/cropped170.png",
  "assets/images/animatedradar/base/cropped171.png",
  "assets/images/animatedradar/base/cropped172.png",
  "assets/images/animatedradar/base/cropped173.png",
  "assets/images/animatedradar/base/cropped174.png",
  "assets/images/animatedradar/base/cropped175.png",
  "assets/images/animatedradar/base/cropped176.png",
  "assets/images/animatedradar/base/cropped177.png",
  "assets/images/animatedradar/base/cropped178.png"
];
const empty = "assets/images/animatedradar/base/radar_empty.png";
const blip = "assets/images/animatedradar/base/blip.png";
const blip_faded = "assets/images/animatedradar/base/blip_faded.png";

  class Radar {
  constructor(app, position) {
    const textures = [];
    for (const frame of frames) {
      textures.push(PIXI.Texture.from(frame));
    }
    this.sprite = new PIXI.Container();
    this.active_radar = new PIXI.AnimatedSprite(textures);
    this.empty_radar = new PIXI.Sprite.from(empty);
    this.blip = new PIXI.Sprite.from(blip);
    this.blip_faded = new PIXI.Sprite.from(blip_faded);
    this.active_radar.animationSpeed = 2;
    this.active_radar.interactive = true;

    // Center the this.sprite's anchor point.
    this.active_radar.anchor.set(0.5);
    this.empty_radar.anchor.set(0.5, 0.745)
    this.active_radar.position = position;
    this.empty_radar.position = position;
    this.blip.anchor.set(0.5, 2);
    this.blip.anchor.x += 1.5
    this.blip.position = position;


    this.active_radar.scale.set(0.5);
    this.empty_radar.scale.set(0.5);
    this.active_radar.play();
    this.sprite.addChild(this.empty_radar);
    this.sprite.addChild(this.active_radar);
  }

  flip_container(e) {
    this.active_radar.anchor.y *= -1;
    this.active_radar.scale.y *= -1;
  }

  add_blip(blip_degree) {
    let y_coeff = Math.abs(90 - (blip_degree % 180))/90;
    let x_coeff = Math.abs(180-blip_degree)/90;
    let y_base = 2;
    if (blip_degree < 90) {
      x_coeff *= -1;
      x_coeff += 2
      y_coeff *= -1;
    }
    if (blip_degree > 180 && blip_degree <= 270) {
      x_coeff *= -1;
    }
    if (blip_degree > 270) {
      y_coeff *= -1;
      x_coeff -= 2;
    }
    console.log(x_coeff, y_coeff);
    this.blip.anchor.x = 0.5 - 2*x_coeff;
    this.blip.anchor.y = y_base - 2*y_coeff;
    this.blip_faded.anchor.x = 0.5 - 2*x_coeff;
    this.blip_faded.anchor.y = y_base - 2*y_coeff;
    this.sprite.addChild(this.blip);
    setTimeout(() => {
      this.sprite.removeChild(this.blip);
      this.sprite.addChild(this.blip_faded)
      setTimeout(() => {this.sprite.removeChild(this.blip_faded)}, 250)
    }, 250);
  }


}

export {Radar};
